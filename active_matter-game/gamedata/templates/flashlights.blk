flashlight_device_dynamic_material{
  _use:t="dynmat_params_base"

  "dynamic_material_channels_arr:array"{
    _tags:t="render"

    "dynamic_material_channel:object"{
      dynamic_material_type:t="emissive"
      dynmat_param__emissive_color:p4=1, 1, 1, 1
      dynmat_param__emission_albedo_mult:r=0.1
    }

    "dynamic_material_channel:object"{
      dynamic_material_type:t="emissive"
      dynmat_param__emissive_color:p4=1, 1, 1, 0
      dynmat_param__emission_albedo_mult:r=0.1
    }
  }
}

flashlight_device{
  _use:t="replicating"
  _use:t="equipable_item"
  _use:t="attached_flashlight_controller"
  _use:t="flashlight_device_dynamic_material"
  item__weight:r=0.1
  item__volume:i=20
  item__marketPrice:i=325
  attached_flashlight_controller__lightNormalBrightness:r=1.5
  attached_flashlight_controller__lightMaxRadius:r=25
  attached_flashlight_controller__lightConeAngle:r=-1
  item_stat__luminosity:i=55
  attached_flashlight_controller__offset:p3=0, 0, 0.01
  item__recreateInInventory:t="base_invis_item"
  item__filterType:t="equipment"
  item__iconYaw:r=15
  item__proto:t="flashlight_device"
  item__name:t="items/flashlight_device1"
  animchar__res:t="flashlight_sidevinder_c_char"
  collres__res:t="flashlight_sidevinder_c_collision"
  item__animcharInInventoryName:t="flashlight_sidevinder_c_char"
  slot_attach__slotName:t="flashlight_chest"
  animchar_render__enabled:b=yes
  animchar__actWhenInvisible:b=yes
  flashlight_device__type:i=0
  flashlight_device__emissiveOnValue:r=10
  flashlight_device__emissiveColor:p3=1, 1, 1
  dropTm:m=[[0, -1, 0] [1, 0, 0] [0, 0, 1] [0, 0.012, 0]]
  showroom_item__customZoom:r=1.4
  showroom_item__customZoomBordersRng:p2=1, 1.8
  profile_server_data__enrichmentRefineChronotracesRange:ip2=5, 5

  "item__equipmentSlots:list<t>"{
    slot:t="flashlight"
  }

  "item__containerOwnerEid:eid"{}
  "equipment_item:tag"{}
  "item__chronotracesProgressionInfo:object"{
    "repeatedly:object"{
      extract:i=100
    }
  }
}

battle_box{
  _use:t="replicating"
  _use:t="equipable_item"
  _use:t="slot_attachable"
  item__weight:r=100
  item__volume:i=3000
  item__recreateInInventory:t="base_invis_item"
  item__filterType:t="equipment"
  item__proto:t="battle_box"
  item__name:t="items/battle_box"
  animchar__res:t="battlepass_box_char"
  collres__res:t="battlepass_box_collision"
  slot_attach__slotName:t="jetpack"
  animchar_render__enabled:b=yes
  animchar__actWhenInvisible:b=yes
  dropTm:m=[[1, 0, 0] [0, 1, 0] [0, 0, 1] [0, 0.005, 0]]

  "item__equipmentSlots:list<t>"{
    slot:t="backpack"
  }

  "item__containerOwnerEid:eid"{}
  "slot_attach__destroyWithParent:tag"{}
  "equipment_item:tag"{}
}

flashlight_spot_light_sound{
  _group{
    _tags:t="sound"
    flashlight_spot_light_sound__onPath:t="player/walker/am_trooper_male/items/flashlight/on"
    flashlight_spot_light_sound__offPath:t="player/walker/am_trooper_male/items/flashlight/off"
  }
}

flashlight_spot_light{
  _use:t="replicating"
  _use:t="gunlight_spot"
  _use:t="flashlight_attracts_owner"
  _use:t="flashlight_spot_light_sound"
  light__brightness:r=0
  flashlight_spot_light__isOn:b=no
  _tracked:t="flashlight_spot_light__isOn"
  _replicated:t="flashlight_spot_light__isOn"
  flashlight_spot_light__blocked:b=no
  _tracked:t="flashlight_spot_light__blocked"
  transform:m=[[1, 0, 0] [0, 1, 0] [0, 0, 1] [0, 0, 0]]
  _tracked:t="transform"
  flashlight_spot_light__type:i=0
  flashlight_spot_light__lightRayMaterial:t="aiRay"
  flashlight_spot_light__lightRayMaterialId:i=0
  flashlight_spot_light__loudNoiseMinCos:r=0.92
  flashlight_spot_light__loudNoiseUpdateInterval:r=0.5
  flashlight_spot_light__loudNoiseUpdateAt:r=0
  flashlight_spot_light__lightScale:r=0.65
  flashlight_spot_light__normalBrightness:r=1.5
  light__radius_scale:r=6
  flashlight_spot_light__extraRotation:p3=0, 0, 0
  flashlight_spot_light__extraRotationQuat:p4=0, 0, 0, 0

  "animchar_attach__attachedTo:eid"{}
  "net__alwaysInScope:tag"{}
}

controlled_flashlight_spot_light{
  _use:t="flashlight_spot_light"
  _replicated:t="flashlight_spot_light__actorEid"

  "flashlight_spot_light__controllerEid:eid"{}
  "flashlight_spot_light__actorEid:eid"{}
}

attached_flashlight_controller{
  _tracked:t="attached_flashlight_controller__spotLightEid"
  attached_flashlight_controller__spotLightTemplate:t="controlled_flashlight_spot_light"
  attached_flashlight_controller__spotLightAttachNodeName:t="flashlight_fx"
  attached_flashlight_controller__spotLightAttachNodeId:i=-1

  "attached_flashlight_controller__spotLightEid:eid"{}
  "attached_flashlight_controller__spotLightAttachEid:eid"{}
}

gun_flashlight_builtin{
  _use:t="gunlight"
  _use:t="flashlight_attracts_owner"
  gun_flashlight_builtin__normalBrightness:r=8
  gun_flashlight_builtin__isOn:b=no
  _tracked:t="gun_flashlight_builtin__isOn"
  _replicated:t="gun_flashlight_builtin__isOn"
}

flashlight_visual_attract_point{
  _use:t="visual_attract_point"
  visual_attract_point__radius:r=0
  flashlight_attract__visualAttractOffset:p3=0, 0, 0
  flashlight_attract__visualAttractRadius:r=0
  flashlight_attract__outdoorRadiusScale:r=0
  flashlight_attract__nextUpdate:r=0
  flashlight_attract__updateInterval:r=0.2

  "flashlight_attract__visualAttractOwnerEid:eid"{}
}

flashlight_attracts_owner{
  flashlight_attracts__visualAttractPointTemplate:t="flashlight_visual_attract_point"

  "flashlight_attracts__visualAttractPoints:list<p4>"{
    value:p4=-4, 0, 0, 2
  }
}
